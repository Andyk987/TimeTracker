(()=>{"use strict";const e="START_CHECKING",t="STOP_CHECKING";console.log("Hello from content script!"),(new class{constructor(){this.chrome=chrome,this.checking=!1,this.defaultUrl="www.youtube.com/watch?",this.prevUrl=""}listenMessage(){this.chrome.runtime.onMessage.addListener((e=>{console.log(e)}))}sendToBackground(e,t){return n=this,o=void 0,c=function*(){yield this.chrome.runtime.sendMessage(e,(e=>{console.log(e,"res"),"START_CHECKING_SUCCEESS"===e.code&&(this.checking=!0)}))},new((s=void 0)||(s=Promise))((function(e,t){function i(e){try{h(c.next(e))}catch(e){t(e)}}function r(e){try{h(c.throw(e))}catch(e){t(e)}}function h(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(e){e(n)}))).then(i,r)}h((c=c.apply(n,o||[])).next())}));var n,o,s,c}detectUrlChange(){new MutationObserver((()=>{if(location.href!==this.prevUrl)if(this.prevUrl=location.href,location.href.includes(this.defaultUrl)){const t={code:e};this.sendToBackground(t)}else{if(!this.checking)return;{const e={code:t};this.sendToBackground(e)}}})).observe(document,{subtree:!0,childList:!0})}handleChecking(n){const o=n?e:t;this.chrome.runtime.sendMessage({code:o})}}).listenMessage()})();