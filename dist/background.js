(()=>{"use strict";var e=function(e,t,s,o){return new(s||(s=Promise))((function(i,n){function c(e){try{a(o.next(e))}catch(e){n(e)}}function r(e){try{a(o.throw(e))}catch(e){n(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(c,r)}a((o=o.apply(e,t||[])).next())}))};console.log("Hello from background script!");class t{constructor(){this.chrome=chrome,this.checkingUrl="www.youtube.com/watch?",this.isChecking=!0,this.timerId=void 0,this.time=0,this.timeStamp=[]}detectTabCreated(){this.chrome.tabs.onCreated.addListener((e=>{this.isChecking&&(console.log(e,"tab"),this.chrome.tabs.sendMessage(e.id,{code:"CHECKING_TRUE"}))}))}getMessage(){return e(this,void 0,void 0,(function*(){yield this.chrome.runtime.onMessage.addListener(((e,t,s)=>{if(!e.hasOwnProperty("code"))return;const{code:o}=this.handleMessage(e);s(o)}))}))}sendMessage(t,s){return e(this,void 0,void 0,(function*(){yield this.chrome.tabs.query({active:!0},(e=>{this.chrome.tabs.sendMessage(t,s,(e=>{console.log(e,"success")}))}))}))}handleMessage(e){switch(e.code){case"START_CHECKING":return this.isChecking=!0,{code:"START_CHECKING_SUCCEESS"};case"STOP_CHECKING":return this.isChecking=!1,{code:"STOP_CHECKING_SUCCEESS"}}}getAllWindows(){this.chrome.windows.getAll((e=>{e&&e.forEach((e=>{var t;null===(t=e.tabs)||void 0===t||t.forEach((e=>{}))}))}))}startChecking(){return e(this,void 0,void 0,(function*(){try{yield new Promise(((e,t)=>{this.timerId=setInterval((()=>{this.time++,console.log(this.time)}),1e3),t()}))}catch(e){console.log("err occ")}}))}stopChecking(){const e=this.timerId;if(console.log(e,"id"),!e)return this.chrome.runtime.sendMessage({code:"STOP_CHECKING_ERROR"});clearInterval(e),this.timerId=void 0}}chrome.runtime.onInstalled.addListener((e=>{const s=chrome.runtime.getManifest();chrome.tabs.query({url:s.content_scripts[0].matches},(e=>{var t;const s=null===(t=e[0])||void 0===t?void 0:t.id;chrome.scripting.executeScript({target:{tabId:s,allFrames:!0},files:["content.js"]},(e=>{console.log(e)}))})),(new t).getMessage()})),chrome.declarativeContent.PageStateMatcher,chrome.tabs.onUpdated.addListener(((e,t,s)=>{"complete"===t.status&&console.log(s,"tab")})),chrome.tabs.onUpdated.addRules([],(()=>{}))})();